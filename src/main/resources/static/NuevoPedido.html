<html>

<head>
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    
    <script type="text/javascript">
    
					var elementsList = new Array();

					function addElementToList() {
						elementsList.push(document.getElementById("element-text-input").value);
						document.getElementById("element-text-input").value = "";
						document.getElementById("ListaElementos").innerHTML = showElementsInList();
					}
					function deleteElementFromList(index) {
						console.log("Running deleteElementFromList()...");
						console.log("deleteElementFromList(): before delete, elementsList is: " + elementsList);
						elementsList.splice(index, 1);
						console.log("deleteElementFromList(): after delete, elementsList is: " + elementsList);
						document.getElementById("ListaElementos").innerHTML = showElementsInList();
					}
					

					function addDeleteElementButton(index) {
						return " <button id=\"delete.element." + index
								+ "\" onclick=\"deleteElementFromList(" + index
								+ ")\">Borrar Elemento</button>";
					}

					function showElementsInList() {
						console.log("Running showElementsInList()...");

						if (elementsList.length == 0) {
							aux = "Ningún elemento en la lista.";
						} else {
							aux = "<ul>";
							for (var i = 0; i < elementsList.length; i++) {
								aux += "<li>";
								aux += elementsList[i];
								if (elementsList.length > 1) {
									aux += addDeleteElementButton(i);
								}
								aux += "</li>";
							}
							aux += "</ul>";
						}
						console.log("showElementsInList(): aux is: " + aux);
						return aux;
					}

					function submitNuevoPedido() {
						console.log("Running submitNuevoPedido()...");
						console
								.log("setFormVaues(): titulo-input.value is: "
										+ document
												.getElementById("titulo-input").value);
						console.log("setFormVaues(): elementsList is: "
								+ elementsList);
						document.getElementById("titulo").value = document
								.getElementById("titulo-input").value;
						document.getElementById("elementos").value = elementsList;
						document.forms["NuevoPedido"].submit();
					}
				</script>
    
</head>


<body>

<h1>Nuevo Pedido</h1>
		Titulo: <input type="text" id="titulo-input"><br>

		<h2>Elementos del pedido</h2>
		<div id='ListaElementos'></div>

		<script type="text/javascript">
		document.getElementById("ListaElementos").innerHTML = showElementsInList();
		</script>

		<hr>
		
		<input id='element-text-input' type='text'>
		<button id='add-button' onclick="addElementToList()">Añadir Elemento</button>

	<form id="NuevoPedido" action="Nuevo" method="get">
		<input type="hidden" id="titulo" name="titulo">
		<input type="hidden" id="elementos" name="elementos">
	</form>
		<hr><button onclick="submitNuevoPedido()">Registrar Nuevo Pedido</button>
		
</body>

</html>